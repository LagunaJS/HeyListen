"use strict"
function BuscarSoundCloud(t){var a="http://api.soundcloud.com/tracks.json?client_id=a6c32f43a9c86c747d79943a65c389e5&q="+t+"&limit=10"
$.ajax({url:a,type:"GET",contentType:"application/json;chartset=utf-8",success:function(t){$("#listaCancionesSC").empty()
var a=""
$.each(t,function(t,s){a+='<li class="estiloListas stroke"><img class="icon" src="http://lpdelche.com/hl/images/orange.png"/><a href="'+s.permalink_url+'"><img onerror="imgRespaldo('+s.artwork_url+')" src="'+s.artwork_url+'" />'+s.title+'</a></li><button thumbnail="'+s.artwork_url+'" cancion="'+s.title+'" url="'+s.permalink_url+'" servicio="sc" class="guardar btnGuardar">Guardar</button>'}),$("#listaCancionesSC").html(a)}})}function BuscarYoutube(t){var a="https://www.googleapis.com/youtube/v3/search?q="+t+"&part=snippet&type=video&key=AIzaSyALOIAA9DP1cGxWMAmQYxFXX65lf6lfsbY"
$.ajax({url:a,type:"GET",contentType:"application/json;chartset=utf-8",success:function(t){$("#listaCancionesYT").empty()
var a=""
$.each(t.items,function(t,s){a+='<li class="estiloListas stroke"><img class="icon" src="http://lpdelche.com/hl/images/ftyt.png"/><a href="https://www.youtube.com/watch?v='+s.id.videoId+'"><img onerror="imgRespaldo('+s.snippet.thumbnails.medium.url+')" src="'+s.snippet.thumbnails.medium.url+'" />'+s.snippet.title+'</a></li><button thumbnail="'+s.snippet.thumbnails.medium.url+'" cancion="'+s.snippet.title+'" url="https://www.youtube.com/watch?v='+s.id.videoId+'" servicio="yt" class="guardar btnGuardar">Guardar</button>'}),$("#listaCancionesYT").html(a)}})}function BuscarSpotify(t){var a="https://api.spotify.com/v1/search?q="+t+"&type=track&market=MX&limit=10"
$.ajax({url:a,type:"GET",contentType:"application/json;chartset=utf-8",success:function(t){$("#listaCancionesSP").empty()
var a=""
$.each(t.tracks.items,function(t,s){a+='<li class="estiloListas stroke"><img class="icon" src="http://lpdelche.com/hl/images/spotifyLogo.png"/><a href="'+s.external_urls.spotify+'"><img src="'+s.album.images[1].url+'" />'+s.name+'</a></li><button thumbnail="'+s.album.images[1].url+'" cancion="'+s.name+'" url="'+s.external_urls.spotify+'" servicio="sp" class="guardar btnGuardar">Guardar</button>'}),$("#listaCancionesSP").html(a)}})}function Guardar(t,a,s,i){var e="http://heylistenapi.azurewebsites.net/canciones",r=localStorage.a8d7f0a88sdfa7s0d8,n={nombre:a,url:t,idUsuario:r,servicio:s,imagen:i}
$.ajax({url:e,type:"POST",data:JSON.stringify(n),contentType:"application/json;chartset=utf-8",statusCode:{success:function(){},error:function(){alertify.error("No se pudo guardar")}}}),alertify.success("Cancion guardada")}function imgRespaldo(t){$("img[src="+t+"]").attr("src","http://lpdelche.com/hl/images/ftyt.png")}$("ul").on("click","button",function(t){t.preventDefault()
var a=$(this).attr("url"),s=$(this).attr("servicio"),i=$(this).attr("cancion").substring(0,50),e=$(this).attr("thumbnail")
Guardar(a,i,s,e)}),$(document).on("keyup","#busqueda",function(){var t=$("#busqueda").val()
""!=t&&(BuscarSoundCloud(t),BuscarYoutube(t),BuscarSpotify(t))})
